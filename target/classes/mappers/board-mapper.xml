<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardMapper">
	
 	<resultMap id="boardMap" type="Board">
 		<id column="BCODE" property="bcode" />
 		<result column="TITLE" property="title"/>
 		<result column="CONTENT" property="content"/>
 		<result column="DISTINGUISH" property="distinguish"/>
 		<result column="WRITERID" property="writerid"/>
 		<result column="POSTDATE" property="postdate"/>
 		<result column="ISDELETE" property="isdelete"/>
 		<result column="HASFILE" property="hasfile"/>
 		<association property="code" javaType="BoardCode">
 			<id column="DISCODE" property="discode" />
 			<result column="NAME" property="name"/>
 		</association>
 		<association property="point" javaType="BoardPoint">
 			<id column="BCODE" property="bcode" />
	 		<result column="VIEWNUM" property="viewnum"/>
	 		<result column="BEST" property="best"/>
	 		<result column="GOOD" property="good"/>
	 		<result column="BAD" property="bad"/>
	 		<result column="WORST" property="worst"/>
	 		<result column="CAL" property="cal"/>
 		</association>
 	</resultMap>
 	
 	<sql id="boardTemplate">
		SELECT A.BCODE,A.TITLE,A.CONTENT,A.DISTINGUISH,A.WRITERID,A.POSTDATE,<!-- A.ISDELETE, -->A.HASFILE,
			   B.DISCODE,B.NAME,
			   C.BCODE,C.VIEWNUM,C.BEST,C.GOOD,C.BAD,C.WORST,C.CAL,
			   (SELECT TO_CHAR(COUNT(*)) FROM COMMENTS D WHERE A.BCODE=D.BCODE) ISDELETE 
		FROM BOARD A
		JOIN BOARDCODE B 
		ON A.DISTINGUISH=B.DISCODE
		JOIN BOARDPOINT C
		ON A.BCODE=C.BCODE
	</sql>
 	
 	<select id="selectAllBoardList" resultMap="boardMap">
		<include refid="boardTemplate"/>
	</select>
 	
 	<select id="selectBoardList" resultMap="boardMap" parameterType="_int">
		<include refid="boardTemplate"/>
		WHERE A.DISTINGUISH=#{dis}
	</select>
 	 	
	
	<select id="selectBoardOne" resultMap="boardMap" parameterType="_int">
		<include refid="boardTemplate"/>
		WHERE A.BCODE=#{bcode}
	</select>
	

	
</mapper>
